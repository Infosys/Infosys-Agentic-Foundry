
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../files_upload/files/">
      
      
        <link rel="next" href="../configurations/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Open Telemetry - Agentic Foundry</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/hide-footer.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#telemetry" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Agentic Foundry" class="md-header__button md-logo" aria-label="Agentic Foundry" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Agentic Foundry
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Open Telemetry
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Agentic Foundry" class="md-nav__button md-logo" aria-label="Agentic Foundry" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Agentic Foundry
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Definitions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Definitions/Vocabulary%20-%20Definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vocabulary - Definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Definitions/hitl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Human in the loop
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installation/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installation/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installation/Azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Azure
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Database%20setup/Database%20Setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Agents Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Agents Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Agents%20Design/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Agents%20Design/React%20Agent%20Design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agent Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Agents%20Design/Multi%20Agent%20Design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi Agent Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Agents%20Design/Orchestration%20Meta%20Agent%20Design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orchestration Meta Agent Design
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools_config/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools Configuration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tool_Validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tool Validation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tool%20Interrupt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tool Interrupt
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Agent Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Agent Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent_config/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent_config/reactAgent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agent Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent_config/multiAgent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi Agent Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent_config/metaAgent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta Agent Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Inference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Inference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Inference/inference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Inference/reactAgent_inference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    React Agent Inference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Inference/multiAgent_inference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi Agent Inference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Inference/metaAgent_inference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta Agent Inference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files_upload/files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Files
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" checked>
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Telemetry
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Telemetry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Open Telemetry
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Open Telemetry
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-components-of-telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      Key Components of Telemetry:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opentelemetry-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      OpenTelemetry Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-flowchart" class="md-nav__link">
    <span class="md-ellipsis">
      Telemetry Flowchart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-collection-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Data Collection &amp; Monitoring
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-of-opentelemetry-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation of OpenTelemetry Logging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      Components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits-of-telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of Telemetry
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configurations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configurations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Connecting%20to%20Grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connecting to Grafana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Arize_Phoenix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arize Phoenix
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Evaluation/evaluation_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluation Metrics
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-components-of-telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      Key Components of Telemetry:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opentelemetry-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      OpenTelemetry Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-flowchart" class="md-nav__link">
    <span class="md-ellipsis">
      Telemetry Flowchart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-collection-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Data Collection &amp; Monitoring
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-of-opentelemetry-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation of OpenTelemetry Logging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      Components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits-of-telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of Telemetry
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="telemetry">Telemetry</h1>
<h3 id="key-components-of-telemetry">Key Components of Telemetry:</h3>
<ol>
<li><strong>Logs</strong>: Captures LLM inputs, outputs, prompts, responses, errors, and debugging information.</li>
<li><strong>Traces</strong>: Tracks the chain of thought, agent decisions, and agent state to observe how individual LLM tasks are executed.</li>
</ol>
<hr />
<h3 id="opentelemetry-workflow">OpenTelemetry Workflow</h3>
<p>OpenTelemetry is an open-source framework for collecting telemetry data (logs and traces) from applications. Below is an explanation of the workflow:</p>
<ol>
<li><strong>OpenTelemetry - Logging Statements (Actions)</strong>: Logs are generated in the application code using OpenTelemetry libraries.</li>
<li><strong>OpenTelemetry Collector - Transfers Logs from Code</strong>: The OpenTelemetry Collector gathers logs from the application and forwards them to a suitable backend.</li>
<li><strong>ElasticSearch - Log Format Compatibility</strong>: Logs are stored in ElasticSearch, which provides a structured and searchable format for telemetry data.</li>
<li><strong>ElasticSearch - Grafana Connection</strong>: ElasticSearch integrates with Grafana to visualize the telemetry data.</li>
<li><strong>Final Dashboard</strong>: Grafana displays the logs and metrics in a user-friendly dashboard for monitoring and analysis.</li>
</ol>
<hr />
<h3 id="telemetry-flowchart">Telemetry Flowchart</h3>
<style>
.flow-mini {
  font-family: sans-serif;
  max-width: 300px;
  margin: 2em auto;
  text-align: center;
  font-size: 14px;
}
.flow-mini .step {
  background: #eef;
  border: 1px solid #88a;
  border-radius: 6px;
  padding: 8px;
  margin: 8px 0;
}
.flow-mini .arrow {
  font-size: 1.2em;
  color: #888;
  margin: 4px 0;
}
</style>

<div class="flow-mini">
  <div class="step">OpenTelemetry<br><small>Logging Statements</small></div>
  <div class="arrow">↓</div>

  <div class="step">Open telemetry collector<br><small>Transfer Logs</small></div>
  <div class="arrow">↓</div>

  <div class="step">Elasticsearch<br><small>For Longer Format</small></div>
  <div class="arrow">↓</div>

  <div class="step">Graphana<br><small>Connection to Graphana</small></div>
  <div class="arrow">↓</div>

  <div class="step">Final Dashboard<br><small></small></div>
</div>

<hr />
<h3 id="data-collection-monitoring">Data Collection &amp; Monitoring</h3>
<ul>
<li>
<p><strong>Data Collection</strong>: 
The OpenTelemetry SDK is used to collect traces and logs from the agent framework, capturing detailed telemetry data.</p>
</li>
<li>
<p><strong>Data Export</strong>:
The OpenTelemetry Collector transfers the collected logs and traces from the framework to an external storage or analysis system.</p>
</li>
<li>
<p><strong>Centralized Storage &amp; Anlysis</strong>:
All telemetry data is centrally stored in ElasticSearch, enabling structured storage and efficient querying.</p>
</li>
<li>
<p><strong>Visualization</strong>:
Grafana retrieves data from the centralized storage to populate dashboards, offering real-time insights into application performance, user interactions, and agent workflows.</p>
</li>
</ul>
<hr />
<h3 id="implementation-of-opentelemetry-logging">Implementation of OpenTelemetry Logging</h3>
<p>The <code>setup_otel_logging</code> function initializes the OpenTelemetry logging pipeline for an application. It ensures that logs are collected, processed, and exported to a backend system for analysis. </p>
<pre><code class="language-python">import logging, atexit 
from opentelemetry import trace, _logs 
from logging import Logger
from functools import wraps
from opentelemetry.sdk._logs.export import BatchLogRecordProcessor 
from opentelemetry.exporter.otlp.proto.http._log_exporter import OTLPLogExporter as OTLPLogExporterHTTP 
from opentelemetry.sdk._logs import (
    LoggerProvider,
    LoggingHandler 
)
from opentelemetry.sdk.resources import (
    Resource,
    SERVICE_NAME  
)


# --- Global variable to hold the configured provider (initialized once) ---
_otel_logger_provider = None
USE_OTEL_LOGGING = False # keep it as True in VM for Otel Collector, False in local dev

# --- Function for one-time OTel logging setup ---
def setup_otel_logging(service_name=&quot;agentic-workflow-service&quot;, use_http=True):
    &quot;&quot;&quot;
    Initializes the OpenTelemetry logging pipeline. Should be called once.
    &quot;&quot;&quot;
    global _otel_logger_provider
    if _otel_logger_provider is not None:
        print(&quot;--- OpenTelemetry Logging already initialized. ---&quot;)
        return _otel_logger_provider

    print(f&quot;--- Setting up OpenTelemetry Logging for service: {service_name} ---&quot;)
    resource = Resource(attributes={SERVICE_NAME: service_name})

    if use_http:
        default_endpoint = &quot;http://localhost:4320/v1/logs&quot;
        env_var_name = &quot;OTEL_EXPORTER_OTLP_LOGS_ENDPOINT_HTTP&quot;
        ExporterClass = OTLPLogExporterHTTP
        protocol = &quot;HTTP&quot;
    else: # Assuming gRPC for the else case, ensure opentelemetry-exporter-otlp-proto-grpc is installed
        default_endpoint = &quot;localhost:4319&quot;
        env_var_name = &quot;OTEL_EXPORTER_OTLP_LOGS_ENDPOINT_GRPC&quot;
        try:
            from opentelemetry.exporter.otlp.proto.grpc._log_exporter import OTLPLogExporter as OTLPLogExporterGRPC
            ExporterClass = OTLPLogExporterGRPC
        except ImportError:
            print(&quot;[ERROR] OTLP gRPC Exporter not found. Please install 'opentelemetry-exporter-otlp-proto-grpc'. Falling back to HTTP.&quot;)
            default_endpoint = &quot;http://localhost:4320/v1/logs&quot; # Fallback
            env_var_name = &quot;OTEL_EXPORTER_OTLP_LOGS_ENDPOINT_HTTP&quot;
            ExporterClass = OTLPLogExporterHTTP
            protocol = &quot;HTTP&quot;
        protocol = &quot;gRPC&quot;


    otlp_endpoint = os.getenv(env_var_name, default_endpoint)
    print(f&quot;--- OTLP Log Exporter ({protocol}) Endpoint: {otlp_endpoint} ---&quot;)
    exporter_args = {&quot;endpoint&quot;: otlp_endpoint}

    # Add headers if needed
    headers_str = os.getenv(&quot;OTEL_EXPORTER_OTLP_LOGS_HEADERS&quot;)
    if headers_str:
        try:
            exporter_args[&quot;headers&quot;] = dict(item.split(&quot;=&quot;) for item in headers_str.split(&quot;,&quot;))
            print(f&quot;--- Using OTLP Headers: {exporter_args['headers']} ---&quot;)
        except ValueError:
            print(f&quot;[ERROR] Invalid format for OTEL_EXPORTER_OTLP_LOGS_HEADERS. Expected 'key1=value1,key2=value2'.&quot;)


    try:
      log_exporter = ExporterClass(**exporter_args)
    except Exception as e:
        print(f&quot;[ERROR] Failed to initialize OTLP exporter ({protocol}): {e}&quot;)
        return None

    _otel_logger_provider = LoggerProvider(resource=resource)
    _logs.set_logger_provider(_otel_logger_provider)
    log_processor = BatchLogRecordProcessor(log_exporter)
    _otel_logger_provider.add_log_record_processor(log_processor)

    print(&quot;--- OpenTelemetry Logging Setup Complete ---&quot;)
    return _otel_logger_provider

</code></pre>
<p><strong><code>USE_OTEL_LOGGING</code> Configuration Flag</strong></p>
<p>The <code>USE_OTEL_LOGGING</code> flag determines whether OpenTelemetry (Otel) logging is enabled in your application, and it helps control the telemetry data flow between your application and the OpenTelemetry Collector. This flag is particularly useful in managing the difference between development and production environments.</p>
<p><strong>Local Development:</strong></p>
<pre><code class="language-python">USE_OTEL_LOGGING = False  # Default value for local development
</code></pre>
<p>When developing locally, If the required dependencies are not available or if logging is disabled by setting USE_OTEL_LOGGING to false, the system will output relevant information to the console when you run the file. This ensures you are informed of any missing configurations or services, helping to avoid confusion during local development.</p>
<p><strong>Production or Remote Environments:</strong></p>
<pre><code class="language-python">USE_OTEL_LOGGING = True  # Set this to True when running in a VM or production environment
</code></pre>
<p>In production or more complex environments (e.g., Virtual Machines), telemetry data collection (such as logs, traces, and metrics) is crucial for monitoring and troubleshooting application performance. This flag ensures the application sends telemetry data to the Otel Collector in such environments.</p>
<h2 id="components">Components</h2>
<p><strong>1. SessionContext class</strong> </p>
<p>The <code>SessionContext</code> class manages session specific metadata. It allows setting and retrieving context values.</p>
<pre><code class="language-python">class SessionContext:
    _context = {}

    @classmethod
    def _serialize_if_complex(cls, value):
        &quot;&quot;&quot;Helper to serialize lists/dicts to JSON strings, pass others.&quot;&quot;&quot;
        if isinstance(value, (list, dict)):
            try:
                return json.dumps(value)
            except TypeError as e:
                # Fallback for unserializable objects: convert to string
                # You might want more sophisticated handling or logging here
                print(f&quot;[WARNING] SessionContext: Could not JSON serialize value of type {type(value)}, falling back to str(): {e}&quot;)
                return str(value)
        return value

    @classmethod
    def set(
        cls,
        user_id=None, session_id=None, agent_id=None,
        tool_id=None, tool_name=None, model_used=None,
        tags=None, agent_name=None, agent_type=None, tools_binded=None,
        agents_binded=None, user_query=None, response=None,
        action_type=None, action_on=None, previous_value=None, new_value=None
    ):
        &quot;&quot;&quot;Update specific fields, JSON serializing complex types.&quot;&quot;&quot;
        if user_id is not None: cls._context['user_id'] = user_id
        if session_id is not None: cls._context['session_id'] = session_id
        if agent_id is not None: cls._context['agent_id'] = agent_id
        if agent_name is not None: cls._context['agent_name'] = agent_name
        if tool_id is not None: cls._context['tool_id'] = tool_id
        if tool_name is not None: cls._context['tool_name'] = tool_name
        if model_used is not None: cls._context['model_used'] = model_used

        # Serialize complex fields
        if tags is not None: cls._context['tags'] = cls._serialize_if_complex(tags)
        if agent_type is not None: cls._context['agent_type'] = agent_type
        if tools_binded is not None: cls._context['tools_binded'] = cls._serialize_if_complex(tools_binded)
        if agents_binded is not None: cls._context['agents_binded'] = cls._serialize_if_complex(agents_binded)
        if user_query is not None: cls._context['user_query'] = cls._serialize_if_complex(user_query) 
        if response is not None: cls._context['response'] = cls._serialize_if_complex(response) 
        if action_type is not None: cls._context['action_type'] = action_type
        if action_on is not None: cls._context['action_on'] = action_on
        if previous_value is not None: cls._context['previous_value'] = cls._serialize_if_complex(previous_value)
        if new_value is not None: cls._context['new_value'] = cls._serialize_if_complex(new_value)


    @classmethod
    def get(cls):
        &quot;&quot;&quot;Retrieve all context values, defaulting to 'Unassigned' if not set&quot;&quot;&quot;
        return (
            cls._context.get('user_id', 'Unassigned'),
            cls._context.get('session_id', 'Unassigned'),
            cls._context.get('agent_id', 'Unassigned'),
            cls._context.get('agent_name', 'Unassigned'),
            cls._context.get('tool_id', 'Unassigned'),
            cls._context.get('tool_name', 'Unassigned'),
            cls._context.get('model_used', 'Unassigned'),
            cls._context.get('tags', 'Unassigned'),
            cls._context.get('agent_type', 'Unassigned'),
            cls._context.get('tools_binded', 'Unassigned'), 
            cls._context.get('agents_binded', 'Unassigned'),
            cls._context.get('user_query', 'Unassigned'),   
            cls._context.get('response', 'Unassigned'),     
            cls._context.get('action_type', 'Unassigned'),
            cls._context.get('action_on', 'Unassigned'),
            cls._context.get('previous_value', 'Unassigned'),
            cls._context.get('new_value', 'Unassigned')     
        )
</code></pre>
<hr />
<p><strong>2. update_session_context function</strong></p>
<p>This <code>update_session_context</code> function dynamically updates the session context.</p>
<pre><code class="language-python">ef update_session_context(
        user_id=None, session_id=None, agent_id=None,agent_name=None, tool_id=None, tool_name=None,
        model_used=None, tags=None, agent_type=None,
        tools_binded=None, agents_binded=None, user_query=None, response=None,
        action_type=None, action_on=None, previous_value=None, new_value=None
    ):
    SessionContext.set(
        user_id=user_id, session_id=session_id, agent_id=agent_id, agent_name=agent_name,
        tool_id=tool_id, tool_name=tool_name, model_used=model_used, tags=tags,
        agent_type=agent_type, tools_binded=tools_binded, agents_binded=agents_binded,
        user_query=user_query, response=response, action_type=action_type, action_on=action_on,
        previous_value=previous_value, new_value=new_value
    )
</code></pre>
<hr />
<p><strong>3. CustomFilter class</strong></p>
<p>The CustomFilter class is a custom logging filter that enriches log records with additional context-specific attributes and trace/span IDs. It ensures that logs contain detailed metadata, making them more informative and traceable in distributed systems.</p>
<pre><code class="language-python">class CustomFilter(logging.Filter):
    def filter(self, record):
        (
            user_id, session_id, agent_id, agent_name,
            tool_id, tool_name, model_used, tags,
            agent_type, tools_binded, agents_binded, user_query, response,
            action_type, action_on, previous_value, new_value
        ) = SessionContext.get()

        current_span = trace.get_current_span()
        record.trace_id = &quot;00000000000000000000000000000000&quot;
        record.span_id = &quot;0000000000000000&quot;
        if current_span and current_span.get_span_context().is_valid:
            record.trace_id = &quot;{trace:032x}&quot;.format(trace=current_span.get_span_context().trace_id)
            record.span_id = &quot;{span:016x}&quot;.format(span=current_span.get_span_context().span_id)

        record.user_id = user_id
        record.session_id = session_id
        record.agent_id = agent_id
        record.agent_name = agent_name
        record.tool_id = tool_id
        record.tool_name = tool_name
        record.model_used = model_used
        record.tags = tags 
        record.agent_type = agent_type
        record.tools_binded = tools_binded 
        record.agents_binded= agents_binded 
        record.user_query = user_query  
        record.response = response      
        record.action_type = action_type
        record.action_on = action_on
        record.previous_value = previous_value  
        record.new_value = new_value          

        return True
</code></pre>
<hr />
<p><strong>4. get_logger function</strong></p>
<p>The <code>get_logger</code> function creates and configures a logger with context-specific attributes and integrates it with OpenTelemetry (OTel) for enhanced observability. This logger is designed to capture detailed logs enriched with trace and span information, making it suitable for distributed systems.</p>
<pre><code class="language-python">def get_logger(otel_provider_instance) -&gt; Logger: 
    &quot;&quot;&quot;Create a logger with context-specific attributes and OTel handler&quot;&quot;&quot;

    if otel_provider_instance is None:
        print(&quot;[ERROR] OpenTelemetry Logging provider is None in get_logger. Attempting fallback init.&quot;)
        otel_provider_instance = setup_otel_logging()
        if otel_provider_instance is None:
             raise RuntimeError(&quot;OpenTelemetry Logging not initialized and fallback failed. Cannot create OTel handler.&quot;)

    log_format = &quot;%(asctime)s [%(levelname)s] [%(filename)s:%(lineno)d] [trace_id=%(trace_id)s span_id=%(span_id)s] [%(name)s] [SessID:%(session_id)s AgentID:%(agent_id)s] - %(message)s&quot;
    formatter = logging.Formatter(log_format, datefmt=&quot;%Y-%m-%d %H:%M:%S&quot;)

    console_handler = logging.StreamHandler()
    console_handler.setFormatter(formatter)
    console_handler.setLevel(logging.WARNING)

    otel_handler = LoggingHandler(level=logging.DEBUG, logger_provider=otel_provider_instance)

    log = logging.getLogger(&quot;agentic_workflow_logger&quot;) 
    log.setLevel(logging.DEBUG)

    # Check if handlers of specific types are already added to prevent duplicates more robustly
    has_console_handler = any(isinstance(h, logging.StreamHandler) for h in log.handlers)
    has_otel_handler = any(isinstance(h, LoggingHandler) for h in log.handlers)
    has_custom_filter = any(isinstance(f, CustomFilter) for f in log.filters)

    if not has_console_handler: log.addHandler(console_handler)
    if not has_otel_handler: log.addHandler(otel_handler)
    if not has_custom_filter: log.addFilter(CustomFilter())

    return log
</code></pre>
<hr />
<p><strong>Example Usage</strong>:</p>
<ul>
<li>Initialize OTel Logging</li>
<li>Call setup using HTTP by default, matching the intended collector port 4320</li>
</ul>
<pre><code class="language-python">_otel_logger_provider = None
if USE_OTEL_LOGGING:
    _otel_logger_provider = setup_otel_logging(
        service_name=&quot;agentic-workflow-service&quot;,
        use_http=True
    )
</code></pre>
<ul>
<li>Initialize the logger instance that other modules will import</li>
<li>Check if provider setup was successful before creating logger</li>
</ul>
<pre><code class="language-python">if _otel_logger_provider:
    logger = get_logger(_otel_logger_provider)
else:
    print(&quot;[WARNING] OTel setup skipped or failed. Falling back to console-only logging.&quot;)
    logger = logging.getLogger(&quot;agentic_workflow_logger_fallback&quot;)
    if not logger.handlers:
        handler = logging.StreamHandler()
        formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
        handler.setFormatter(formatter)
        logger.addHandler(handler)
        logger.setLevel(logging.DEBUG)
</code></pre>
<hr />
<p><strong>shutdown function</strong>: </p>
<pre><code class="language-python">def shutdown_otel_logging():
    global _otel_logger_provider
    if _otel_logger_provider:
        print(&quot;--- Shutting down OpenTelemetry Logging ---&quot;)
        try:
            _otel_logger_provider.shutdown()
            print(&quot;--- OpenTelemetry Logging Shutdown Complete ---&quot;)
        except Exception as e:
            print(f&quot;[ERROR] Exception during OTel logging shutdown: {e}&quot;)
        finally:
            _otel_logger_provider = None
</code></pre>
<ul>
<li>Register the shutdown function to be called when the Python process exits</li>
</ul>
<pre><code class="language-python">atexit.register(shutdown_otel_logging)
</code></pre>
<hr />
<h2 id="benefits-of-telemetry">Benefits of Telemetry</h2>
<ul>
<li><strong>Improved Monitoring</strong>: Real-time insights into system performance.</li>
<li><strong>Faster Debugging</strong>: Easier identification of issues through logs and traces.</li>
<li><strong>Enhanced Optimization</strong>: Data-driven decisions to improve system efficiency.</li>
<li><strong>Scalability</strong>: Suitable for distributed systems and microservices.</li>
</ul>
<p>By leveraging OpenTelemetry, ElasticSearch, and Grafana, organizations can build robust observability pipelines to monitor and maintain their systems effectively.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.path"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>